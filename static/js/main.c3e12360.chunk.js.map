{"version":3,"sources":["components/App/App.module.scss","components/Info/Info.module.scss","assets/btc.svg","assets/eur.svg","assets/rur.svg","assets/uah.svg","assets/usd.svg","config/config.js","assets/remove.svg","components/CurrencyRow/CurrencyRow.js","redux/Actions.js","redux/Selectors.js","components/Info/Info.js","services/api.js","utils/utils.js","components/App/App.js","redux/Reducers.js","redux/Store.js","index.js","components/CurrencyRow/CurrencyRow.module.scss"],"names":["module","exports","currency","currencyFlags","UAH","uah","BTC","btc","USD","usd","EUR","eur","RUR","rur","CurrencyRow","allCurrencies","selectedCurrency","onChangeCurrency","amount","onChangeAmount","handleResetAmount","className","s","container","inputContainer","type","input","value","onChange","button","onClick","remove","src","alt","img","select","map","fromAmountAction","createAction","toAmountAction","fromCurrencyAction","toCurrencyAction","getFromAmount","state","currencies","getToAmount","getFromCurrency","getToCurrency","Info","fromAmount","useSelector","toAmount","fromCurrency","toCurrency","to","getExchangeRates","a","fetch","then","response","json","data","console","log","validateInput","replace","App","dispatch","useDispatch","useState","error","setError","setAllCurrencies","setFromCurrency","setToCurrency","—ÅurrencyRate","setCurrencyRate","setAmount","amountFromCurrency","setAmountFromCurrency","exchangeRatesFromApi","setExchangeRatesFromApi","useEffect","exchangeRates","length","baseCurrency","base_ccy","exchangeRate","ccy","initDataFromApi","rate","from","mapCurrencies","forEach","sale","getCurrencyRate","app","e","target","equals","currenciesReducer","createReducer","action","payload","store","combineReducers","configureStore","reducer","devTools","process","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c3e12360.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3BT4Y\",\"equals\":\"App_equals__IHSw5\",\"error\":\"App_error__3kwyn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Info_container__264dM\",\"to\":\"Info_to__1OySq\"};","export default __webpack_public_path__ + \"static/media/btc.0965940a.svg\";","export default __webpack_public_path__ + \"static/media/eur.0d982a76.svg\";","export default __webpack_public_path__ + \"static/media/rur.131e59b5.svg\";","export default __webpack_public_path__ + \"static/media/uah.3f024d6e.svg\";","export default __webpack_public_path__ + \"static/media/usd.6b1a1f99.svg\";","import btc from '../assets/btc.svg'\nimport eur from '../assets/eur.svg'\nimport rur from '../assets/rur.svg'\nimport uah from '../assets/uah.svg'\nimport usd from '../assets/usd.svg'\n\nexport const currency = {\n  UAH: 'UAH',\n  BTC: 'BTC',\n  USD: 'USD',\n  EUR: 'EUR',\n  RUR: 'RUR',\n}\n\nexport const currencyFlags = {\n  UAH: uah,\n  BTC: btc,\n  USD: usd,\n  EUR: eur,\n  RUR: rur,\n}\n","export default __webpack_public_path__ + \"static/media/remove.e1213946.svg\";","import s from './CurrencyRow.module.scss'\n\nimport { currencyFlags } from '../../config/config'\nimport remove from '../../assets/remove.svg'\n\nexport default function CurrencyRow({\n  allCurrencies,\n  selectedCurrency,\n  onChangeCurrency,\n  amount,\n  onChangeAmount,\n  handleResetAmount,\n}) {\n  return (\n    <div className={s.container}>\n      <span className={s.inputContainer}>\n        <input\n          type=\"text\"\n          className={s.input}\n          value={amount}\n          onChange={onChangeAmount}\n        />\n        <button type=\"button\" className={s.button} onClick={handleResetAmount}>\n          <img className={s.remove} src={remove} alt=\"remove\" />\n        </button>\n      </span>\n      <img\n        className={s.img}\n        src={currencyFlags[selectedCurrency]}\n        alt=\"currency\"\n      />\n      <select\n        className={s.select}\n        value={selectedCurrency}\n        onChange={onChangeCurrency}\n      >\n        {allCurrencies.map(currency => (\n          <option key={currency} value={currency}>\n            {currency}\n          </option>\n        ))}\n      </select>\n    </div>\n  )\n}\n","import { createAction } from '@reduxjs/toolkit'\n\nexport const fromAmountAction = createAction('fromAmount')\nexport const toAmountAction = createAction('toAmount')\nexport const fromCurrencyAction = createAction('fromCurrency')\nexport const toCurrencyAction = createAction('toCurrency')\n","import {\n  fromAmountAction,\n  toCurrencyAction,\n  fromCurrencyAction,\n  toAmountAction,\n} from './Actions'\n\nexport const getFromAmount = state => state.currencies[fromAmountAction]\nexport const getToAmount = state => state.currencies[toAmountAction]\nexport const getFromCurrency = state => state.currencies[fromCurrencyAction]\nexport const getToCurrency = state => state.currencies[toCurrencyAction]\n","import s from './Info.module.scss'\n\nimport { useSelector } from 'react-redux'\n\nimport {\n  getFromAmount,\n  getToCurrency,\n  getFromCurrency,\n  getToAmount,\n} from '../../redux/Selectors'\n\nexport default function Info() {\n  const fromAmount = useSelector(getFromAmount)\n  const toAmount = useSelector(getToAmount)\n  const fromCurrency = useSelector(getFromCurrency)\n  const toCurrency = useSelector(getToCurrency)\n\n  return (\n    <div className={s.container}>\n      {fromAmount} {fromCurrency} equals\n      <div className={s.to}>\n        {toAmount} {toCurrency}\n      </div>\n    </div>\n  )\n}\n","const BASE_URL =\n  'https://api.privatbank.ua/p24api/pubinfo?exchange&json&coursid=11'\n\nexport const getExchangeRates = async () => {\n  try {\n    const data = await fetch(BASE_URL).then(response => {\n      return response.json()\n    })\n    return data\n  } catch (error) {\n    console.log('getExchangeRates api error: ', error)\n  }\n}\n","import { currency } from '../config/config'\n\nexport const getCurrencyRate = (from, to, exchangeRates) => {\n  if (from === to) {\n    return 1\n  }\n\n  const mapCurrencies = { [currency.UAH]: 1 }\n\n  exchangeRates.forEach(rate => {\n    if (rate.ccy === currency.BTC) {\n      mapCurrencies[rate.ccy] = +rate.sale * mapCurrencies[currency.USD]\n    } else {\n      mapCurrencies[rate.ccy] = +rate.sale\n    }\n  })\n  return mapCurrencies[to] / mapCurrencies[from]\n}\n\nexport const validateInput = value => {\n  if (value === '.') {\n    return ''\n  }\n  return value.replace(/[^.\\d]+/g, '').replace(/^([^.]*\\.)|\\./g, '$1')\n}\n","import s from './App.module.scss'\n\nimport { useEffect, useState } from 'react'\nimport { useDispatch } from 'react-redux'\n\nimport CurrencyRow from '../CurrencyRow/CurrencyRow'\nimport Info from '../Info/Info'\n\nimport { getExchangeRates } from '../../services/api'\nimport { getCurrencyRate, validateInput } from '../../utils/utils'\nimport { currency } from '../../config/config'\nimport {\n  fromCurrencyAction,\n  toCurrencyAction,\n  fromAmountAction,\n  toAmountAction,\n} from '../../redux/Actions'\n\nfunction App() {\n  const dispatch = useDispatch()\n  const [error, setError] = useState(false)\n  const [allCurrencies, setAllCurrencies] = useState([])\n  const [fromCurrency, setFromCurrency] = useState('')\n  const [toCurrency, setToCurrency] = useState('')\n  const [—ÅurrencyRate, setCurrencyRate] = useState(1)\n  const [amount, setAmount] = useState(1)\n  const [amountFromCurrency, setAmountFromCurrency] = useState(true)\n  const [exchangeRatesFromApi, setExchangeRatesFromApi] = useState([])\n\n  useEffect(() => {\n    async function initDataFromApi() {\n      const exchangeRates = await getExchangeRates()\n      setExchangeRatesFromApi(exchangeRates)\n\n      if (exchangeRates?.length) {\n        const baseCurrency = exchangeRates[0].base_ccy\n        const currencies = [\n          baseCurrency,\n          ...exchangeRates.map(exchangeRate => exchangeRate.ccy),\n        ]\n        setAllCurrencies(currencies)\n        setFromCurrency(currency.UAH)\n        setToCurrency(currency.USD)\n        dispatch(fromCurrencyAction(currency.UAH))\n        dispatch(toCurrencyAction(currency.USD))\n      } else {\n        setError(true)\n      }\n    }\n\n    initDataFromApi()\n  }, [dispatch])\n\n  useEffect(() => {\n    if (fromCurrency && toCurrency && exchangeRatesFromApi?.length) {\n      const rate = getCurrencyRate(\n        fromCurrency,\n        toCurrency,\n        exchangeRatesFromApi,\n      )\n\n      setCurrencyRate(rate)\n    }\n  }, [fromCurrency, toCurrency, exchangeRatesFromApi])\n\n  const onChangeFromCurrency = e => {\n    setFromCurrency(e.target.value)\n    dispatch(fromCurrencyAction(e.target.value))\n  }\n\n  const onChangeToCurrency = e => {\n    setToCurrency(e.target.value)\n    dispatch(toCurrencyAction(e.target.value))\n  }\n\n  const handleFromAmountChange = e => {\n    const amount = validateInput(e.target.value)\n    setAmount(amount)\n    setAmountFromCurrency(true)\n  }\n\n  const handleToAmountChange = e => {\n    const amount = validateInput(e.target.value)\n    setAmount(amount)\n    setAmountFromCurrency(false)\n  }\n\n  const handleResetAmount = () => {\n    setAmount(0)\n  }\n\n  let toAmount\n  let fromAmount\n  if (amountFromCurrency) {\n    fromAmount = amount\n    toAmount = amount / —ÅurrencyRate\n  } else {\n    toAmount = amount\n    fromAmount = amount * —ÅurrencyRate\n  }\n\n  useEffect(() => {\n    dispatch(toAmountAction(+toAmount))\n    dispatch(fromAmountAction(+fromAmount))\n  }, [toAmount, fromAmount, dispatch])\n\n  return (\n    <div className={s.app}>\n      <h1>Currency Converter</h1>\n      {error ? (\n        <div className={s.error}>Oops! Something wrong. Please try later.</div>\n      ) : (\n        <>\n          <Info />\n          <CurrencyRow\n            allCurrencies={allCurrencies}\n            selectedCurrency={fromCurrency}\n            onChangeCurrency={onChangeFromCurrency}\n            onChangeAmount={handleFromAmountChange}\n            handleResetAmount={handleResetAmount}\n            amount={fromAmount}\n          />\n          <div className={s.equals}>&#61;</div>\n          <CurrencyRow\n            allCurrencies={allCurrencies}\n            selectedCurrency={toCurrency}\n            onChangeCurrency={onChangeToCurrency}\n            onChangeAmount={handleToAmountChange}\n            handleResetAmount={handleResetAmount}\n            amount={toAmount}\n          />\n        </>\n      )}\n    </div>\n  )\n}\n\nexport default App\n","import { createReducer, combineReducers } from '@reduxjs/toolkit'\n\nimport {\n  fromAmountAction,\n  toAmountAction,\n  fromCurrencyAction,\n  toCurrencyAction,\n} from './Actions'\n\nexport const currenciesReducer = createReducer(\n  {},\n  {\n    [fromAmountAction]: (state, action) => {\n      state[fromAmountAction] = action.payload\n    },\n    [toAmountAction]: (state, action) => {\n      state[toAmountAction] = action.payload\n    },\n    [fromCurrencyAction]: (state, action) => {\n      state[fromCurrencyAction] = action.payload\n    },\n    [toCurrencyAction]: (state, action) => {\n      state[toCurrencyAction] = action.payload\n    },\n  },\n)\n\nexport default combineReducers({\n  currenciesReducer,\n})\n","import { configureStore } from '@reduxjs/toolkit'\nimport { currenciesReducer } from './Reducers'\n\nconst store = configureStore({\n  reducer: {\n    currencies: currenciesReducer,\n  },\n  devTools: process.env.NODE_ENV === 'development',\n})\n\nexport default store\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\n\nimport './index.scss'\n\nimport App from './components/App/App'\nimport store from './redux/Store'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"CurrencyRow_container__u7Zeo\",\"inputContainer\":\"CurrencyRow_inputContainer__1Fjn8\",\"button\":\"CurrencyRow_button__3KvyR\",\"input\":\"CurrencyRow_input__2XBm9\",\"select\":\"CurrencyRow_select__2oSao\",\"img\":\"CurrencyRow_img__2pyEK\",\"remove\":\"CurrencyRow_remove__2rtqD\"};"],"sourceRoot":""}